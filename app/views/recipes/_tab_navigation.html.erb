<!-- Tab Navigation -->
<div class="border-b border-gray-200 mb-8">
  <nav class="-mb-px flex space-x-8">
    <!-- Details Tab -->
    <% if current_step == 'details' %>
      <span class="border-blue-500 text-blue-600 whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center">
        <span class="w-6 h-6 rounded-full flex items-center justify-center mr-2 text-xs bg-blue-100 text-blue-600">1</span>
        Details
      </span>
    <% elsif defined?(@recipe) && @recipe&.persisted? %>
      <%= link_to edit_recipe_path(@recipe), class: "border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center" do %>
        <span class="w-6 h-6 rounded-full flex items-center justify-center mr-2 text-xs bg-green-100 text-green-600">✓</span>
        Details
      <% end %>
    <% else %>
      <span class="border-transparent text-gray-400 whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center">
        <span class="w-6 h-6 rounded-full flex items-center justify-center mr-2 text-xs bg-gray-100 text-gray-400">1</span>
        Details
      </span>
    <% end %>

    <!-- Ingredients Tab -->
    <% if current_step == 'ingredients' %>
      <span class="border-blue-500 text-blue-600 whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center">
        <span class="w-6 h-6 rounded-full flex items-center justify-center mr-2 text-xs bg-blue-100 text-blue-600">2</span>
        Ingredients
      </span>
    <% elsif defined?(@recipe) && @recipe&.persisted? %>
      <%= link_to edit_recipe_ingredients_path(@recipe), class: "border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center" do %>
        <span class="w-6 h-6 rounded-full flex items-center justify-center mr-2 text-xs 
                     <%= @recipe.ingredient_groups.any? && @recipe.ingredient_groups.first&.ingredients&.any? ? 'bg-green-100 text-green-600' : 'bg-gray-100 text-gray-400' %>">
          <%= @recipe.ingredient_groups.any? && @recipe.ingredient_groups.first&.ingredients&.any? ? '✓' : '2' %>
        </span>
        Ingredients
      <% end %>
    <% else %>
      <span class="border-transparent text-gray-400 whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center">
        <span class="w-6 h-6 rounded-full flex items-center justify-center mr-2 text-xs bg-gray-100 text-gray-400">2</span>
        Ingredients
      </span>
    <% end %>

    <!-- Method Tab -->
    <% if current_step == 'method' %>
      <span class="border-blue-500 text-blue-600 whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center">
        <span class="w-6 h-6 rounded-full flex items-center justify-center mr-2 text-xs bg-blue-100 text-blue-600">3</span>
        Method
      </span>
    <% elsif defined?(@recipe) && @recipe&.persisted? && @recipe.ingredient_groups.any? %>
      <%= link_to edit_recipe_steps_path(@recipe), class: "border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center" do %>
        <span class="w-6 h-6 rounded-full flex items-center justify-center mr-2 text-xs 
                     <%= @recipe.steps.any? ? 'bg-green-100 text-green-600' : 'bg-gray-100 text-gray-400' %>">
          <%= @recipe.steps.any? ? '✓' : '3' %>
        </span>
        Method
      <% end %>
    <% else %>
      <span class="border-transparent text-gray-400 whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center">
        <span class="w-6 h-6 rounded-full flex items-center justify-center mr-2 text-xs bg-gray-100 text-gray-400">3</span>
        Method
      </span>
    <% end %>

    <!-- Review/Overview Tab -->
    <% if current_step == 'review' || current_step == 'overview' %>
      <span class="border-blue-500 text-blue-600 whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center">
        <span class="w-6 h-6 rounded-full flex items-center justify-center mr-2 text-xs bg-blue-100 text-blue-600">4</span>
        <%= current_step == 'review' ? 'Review' : 'Overview' %>
      </span>
    <% elsif defined?(@recipe) && @recipe&.persisted? && @recipe.steps.any? %>
      <% if @recipe.draft? %>
        <%= link_to edit_recipe_path(@recipe), class: "border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center" do %>
          <span class="w-6 h-6 rounded-full flex items-center justify-center mr-2 text-xs bg-gray-100 text-gray-400">4</span>
          Review
        <% end %>
      <% else %>
        <%= link_to recipe_path(@recipe), class: "border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center" do %>
          <span class="w-6 h-6 rounded-full flex items-center justify-center mr-2 text-xs bg-green-100 text-green-600">✓</span>
          Overview
        <% end %>
      <% end %>
    <% else %>
      <span class="border-transparent text-gray-400 whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center">
        <span class="w-6 h-6 rounded-full flex items-center justify-center mr-2 text-xs bg-gray-100 text-gray-400">4</span>
        <%= defined?(@recipe) && @recipe&.draft? ? 'Review' : 'Overview' %>
      </span>
    <% end %>
  </nav>
</div>